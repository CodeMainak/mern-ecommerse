(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,c){},72:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),a=c(23),s=c.n(a),i=(c(45),c(6)),o=c(3),u=c.n(o),l=c(5),j=c(2),d=c(4),b=c.n(d);var p=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(j.a)(a,2),i=s[0],o=s[1],d=Object(r.useState)(""),p=Object(j.a)(d,2),O=p[0],h=p[1],x=Object(r.useState)(""),f=Object(j.a)(x,2),v=f[0],m=f[1],g=Object(r.useState)(""),y=Object(j.a)(g,2),k=y[0],w=y[1],C=Object(r.useState)(1),_=Object(j.a)(C,2),A=_[0],N=_[1],P=Object(r.useState)(0),S=Object(j.a)(P,2),I=S[0],E=S[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/products?limit=".concat(9*A,"&").concat(O,"&").concat(v,"&title[regex]=").concat(k));case 2:t=e.sent,n(t.data.products),E(t.data.result),console.log(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i,O,v,k,A]),{products:[c,n],callback:[i,o],category:[O,h],sort:[v,m],search:[k,w],page:[A,N],result:[I,E]}},O=c(8),h=c(14);var x=function(e){var t=Object(r.useState)(!1),c=Object(j.a)(t,2),n=c[0],a=c[1],s=Object(r.useState)(!1),i=Object(j.a)(s,2),o=i[0],d=i[1],p=Object(r.useState)([]),x=Object(j.a)(p,2),f=x[0],v=x[1];Object(r.useEffect)((function(){if(e){var t=function(){var t=Object(l.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("/user/infor",{headers:{Authorization:e}});case 3:c=t.sent,a(!0),1===c.data.role?d(!0):d(!1),v(c.data.cart),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]);var m=function(){var t=Object(l.a)(u.a.mark((function t(c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",alert("Please login to continue buying."));case 2:if(!f.every((function(e){return e._id!==c._id}))){t.next=9;break}return v([].concat(Object(h.a)(f),[Object(O.a)(Object(O.a)({},c),{},{quatity:1})])),t.next=7,b.a.patch("/user/addcart",{cart:[].concat(Object(h.a)(f),[Object(O.a)(Object(O.a)({},c),{},{quatity:1})])},{headers:{Authorization:e}});case 7:t.next=10;break;case 9:alert("This product has already been added to cart.");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{isLogged:[n,a],isAdmin:[o,d],addCart:m,cart:[f,v]}};var f=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(j.a)(a,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/category");case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]),{categories:[c,n],callback:[i,o]}},v=c(0),m=Object(r.createContext)(),g=function(e){var t=e.children,c=Object(r.useState)(!1),n=Object(j.a)(c,2),a=n[0],s=n[1];Object(r.useEffect)((function(){if(localStorage.getItem("firstLogin")){var e=function(){var t=Object(l.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("/user/refresh_token");case 2:c=t.sent,s(c.data.accesstoken),setTimeout((function(){e()}),6e5);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}}),[]);var i={token:[a,s],productsAPI:p(),userAPI:x(a),categoriesAPI:f()};return Object(v.jsx)(m.Provider,{value:i,children:t})},y=c.p+"static/media/menu.e8db7520.svg",k=c.p+"static/media/close.ea7c95d7.svg",w=c.p+"static/media/cart.d146d6c3.svg";var C=function(){var e=Object(r.useContext)(m),t=Object(j.a)(e.userAPI.isLogged,1)[0],c=Object(j.a)(e.userAPI.isAdmin,1)[0],n=Object(j.a)(e.userAPI.cart,1)[0],a=Object(r.useState)(!1),s=Object(j.a)(a,2),o=s[0],d=s[1],p=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O={left:o?0:"-100%"};return console.log(e),Object(v.jsxs)("header",{children:[Object(v.jsx)("div",{className:"menu",onClick:function(){return d(!o)},children:Object(v.jsx)("img",{src:y,alt:"",width:"30"})}),Object(v.jsx)("div",{className:"logo",children:Object(v.jsx)("h1",{children:Object(v.jsxs)(i.b,{to:"",children:[c?"Admin":"Mcky Shop"," "]})})}),Object(v.jsxs)("ul",{style:O,children:[Object(v.jsx)("li",{children:Object(v.jsxs)(i.b,{to:"/",children:[c?"Products":"Shop"," "]})}),c&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsx)(i.b,{to:"/create_product",children:"Create Product"})}),Object(v.jsx)("li",{children:Object(v.jsx)(i.b,{to:"/category",children:"Categories"})})]}),t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsx)(i.b,{to:"/history",children:"History"})}),Object(v.jsx)("li",{children:Object(v.jsx)(i.b,{to:"/",onClick:p,children:"Logout"})})]}):Object(v.jsx)("li",{children:Object(v.jsx)(i.b,{to:"/login",children:"Login \u2736 Register "})}),Object(v.jsx)("li",{onClick:function(){return d(!o)},children:Object(v.jsx)("img",{src:k,alt:"",width:"30",className:"menu"})})]}),c?"":Object(v.jsxs)("div",{className:"cart-icon",children:[Object(v.jsx)("span",{children:n.length}),Object(v.jsx)(i.b,{to:"/cart",children:Object(v.jsx)("img",{src:w,alt:"",width:"30"})})]})]})},_=c(7);var A=function(e){var t=e.product,c=e.deleteProduct,n=Object(r.useContext)(m),a=Object(j.a)(n.userAPI.isAdmin,1)[0],s=n.userAPI.addCart;return Object(v.jsx)("div",{className:"row_btn",children:a?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(i.b,{id:"btn_buy",to:"#!",onClick:function(){return c(t._id,t.images.public_id)},children:"Delete"}),Object(v.jsx)(i.b,{id:"btn_view",to:"/edit_product/".concat(t._id),children:"Edit"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(i.b,{id:"btn_buy",to:"#!",onClick:function(){return s(t)},children:"Buy"}),Object(v.jsx)(i.b,{id:"btn_view",to:"/detail/".concat(t._id),children:"View"})]})})};var N=function(e){var t=e.product,c=e.isAdmin,r=e.deleteProduct,n=e.handleCheck;return Object(v.jsxs)("div",{className:"product_card",children:[c&&Object(v.jsx)("input",{type:"checkbox",checked:t.checked,onChange:function(){return n(t._id)}}),Object(v.jsx)("img",{src:t.images.url,alt:""}),Object(v.jsxs)("div",{className:"product_box",children:[Object(v.jsx)("h2",{title:t.title,children:t.title}),Object(v.jsxs)("span",{children:["$",t.price]}),Object(v.jsx)("p",{children:t.description})]}),Object(v.jsx)(A,{product:t,deleteProduct:r})]})};c(72);var P=function(){return Object(v.jsx)("div",{className:"load-page",children:Object(v.jsx)("div",{className:"loader",children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:Object(v.jsx)("div",{})})})})})})})})})})})})};var S=function(){var e=Object(r.useContext)(m),t=Object(j.a)(e.categoriesAPI.categories,1)[0],c=Object(j.a)(e.productsAPI.category,2),n=c[0],a=c[1],s=Object(j.a)(e.productsAPI.sort,2),i=s[0],o=s[1],u=Object(j.a)(e.productsAPI.search,2),l=u[0],d=u[1];return Object(v.jsxs)("div",{className:"filter_menu",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("span",{children:"Filters:"}),Object(v.jsxs)("select",{name:"category",value:n,onChange:function(e){a(e.target.value),d("")},children:[Object(v.jsx)("option",{value:"",children:"All Products"}),t.map((function(e){return Object(v.jsx)("option",{value:"category="+e._id,children:e.name},e._id)}))]})]}),Object(v.jsx)("input",{type:"text",value:l,placeholder:"Enter your search!",onChange:function(e){return d(e.target.value.toLocaleLowerCase())}}),Object(v.jsxs)("div",{className:"row sort",children:[Object(v.jsx)("span",{children:"Sort By:"}),Object(v.jsxs)("select",{value:i,onChange:function(e){return o(e.target.value)},children:[Object(v.jsx)("option",{value:"",children:"Newest"}),Object(v.jsx)("option",{value:"sort-oldest",children:"Oldest"}),Object(v.jsx)("option",{value:"sort=-sold",children:"Best Sales"}),Object(v.jsx)("option",{value:"sort=-price",children:"Price: Hight-Low"}),Object(v.jsx)("option",{value:"sort=price",children:"Price: Low-Height"})]})]})]})};var I=function(){var e=Object(r.useContext)(m),t=Object(j.a)(e.productsAPI.page,2),c=t[0],n=t[1],a=Object(j.a)(e.productsAPI.result,1)[0];return Object(v.jsx)("div",{className:"load_more",children:a<9*c?"":Object(v.jsx)("button",{onClick:function(){return n(c+1)},children:"Load more"})})};var E=function(){var e=Object(r.useContext)(m),t=Object(j.a)(e.productsAPI.products,2),c=t[0],n=t[1],a=Object(j.a)(e.userAPI.isAdmin,1)[0],s=Object(j.a)(e.token,1)[0],i=Object(j.a)(e.productsAPI.callback,2),o=i[0],d=i[1],p=Object(r.useState)(!1),O=Object(j.a)(p,2),x=O[0],f=O[1],g=Object(r.useState)(!1),y=Object(j.a)(g,2),k=y[0],w=y[1],C=function(e){console.log(e),c.forEach((function(t){t._id===e&&(t.checked=!t.checked)})),n(Object(h.a)(c))},_=function(){var e=Object(l.a)(u.a.mark((function e(t,c){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,c),e.prev=1,f(!0),r=b.a.post("/api/destroy",{public_id:c},{headers:{Authorization:s}}),n=b.a.delete("/api/products/".concat(t),{headers:{Authorization:s}}),e.next=7,r;case 7:return e.next=9,n;case 9:d(!o),f(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,c){return e.apply(this,arguments)}}();return x?Object(v.jsxs)("div",{children:[Object(v.jsx)(P,{})," "]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S,{}),a&&Object(v.jsxs)("div",{className:"delete-all",children:[Object(v.jsx)("span",{children:"Select all"}),Object(v.jsx)("input",{type:"checkbox",checked:k,onChange:function(){c.forEach((function(e){e.checked=!k})),n(Object(h.a)(c)),w(!k)}}),Object(v.jsx)("button",{onClick:function(){c.forEach((function(e){e.checked&&_(e._id,e.images.public_id)}))},children:"Delete ALL"})]}),Object(v.jsx)("div",{className:"products",children:c.map((function(e){return Object(v.jsx)(N,{product:e,isAdmin:a,deleteProduct:_,handleCheck:C},e._id)}))}),Object(v.jsx)(I,{}),0===c.length&&Object(v.jsx)(P,{})]})},q=c(15);var F=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(j.a)(e,2),c=t[0],n=t[1],a=function(e){var t=e.target,r=t.name,a=t.value;n(Object(O.a)(Object(O.a)({},c),{},Object(q.a)({},r,a)))},s=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(c),e.prev=2,e.next=5,b.a.post("/user/login",Object(O.a)({},c));case 5:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"login-page",children:[Object(v.jsx)("h2",{children:"Login"}),Object(v.jsxs)("form",{onSubmit:s,children:[Object(v.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:c.email,onChange:a}),Object(v.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"Password",autoComplete:"on",value:c.password,onChange:a}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("button",{type:"submit",children:"Login"}),Object(v.jsx)(i.b,{to:"/register",children:"Register"})]})]})]})};var L=function(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(j.a)(e,2),c=t[0],n=t[1],a=function(e){var t=e.target,r=t.name,a=t.value;n(Object(O.a)(Object(O.a)({},c),{},Object(q.a)({},r,a)))},s=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(c),e.prev=2,e.next=5,b.a.post("/user/register",Object(O.a)({},c));case 5:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"login-page",children:[Object(v.jsx)("h2",{children:"Register"}),Object(v.jsxs)("form",{onSubmit:s,children:[Object(v.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:c.name,onChange:a}),Object(v.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:c.email,onChange:a}),Object(v.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"Password",autoComplete:"on",value:c.password,onChange:a}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("button",{type:"submit",children:"Register"}),Object(v.jsx)(i.b,{to:"/login",children:"Login"})]})]})]})},D=c(36),z=c(37),R=c(40),T=c(39),U=c(38),B=c.n(U),H=function(e){Object(R.a)(c,e);var t=Object(T.a)(c);function c(){return Object(D.a)(this,c),t.apply(this,arguments)}return Object(z.a)(c,[{key:"render",value:function(){return Object(v.jsx)(B.a,{env:"sandbox",client:{sandbox:"AUxEwMjyE6UDRVs3l0MUmbbVerKyZvkixaWJJ4N4P0ljqkqu1ksrlqFmVOixjkAy1uvCgmgc_ceM5acv",production:"YOUR-PRODUCTION-APP-ID"},currency:"USD",total:1,onError:function(e){console.log("Error!",e)},onSuccess:function(e){console.log("The payment was succeeded!",e)},onCancel:function(e){console.log("The payment was cancelled!",e)},style:{size:"small",color:"blue",shape:"rect",label:"checkout",tagline:!1}})}}]),c}(n.a.Component);var J=function(){var e=Object(r.useContext)(m),t=Object(j.a)(e.userAPI.cart,2),c=t[0],n=t[1],a=Object(r.useState)(0),s=Object(j.a)(a,2),i=s[0],o=s[1],d=Object(j.a)(e.token,1)[0];return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.patch("/user/addcart",{cart:c},{headers:{Authorization:d}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!function(){var e=c.reduce((function(e,t){return e+t.price*t.quatity}),0);o(e)}(),e()}),[c]),0===c.length?Object(v.jsx)("h2",{style:{textAlign:"center",fontSize:"5rem"},children:"Cart Empty"}):Object(v.jsxs)("div",{children:[c.map((function(e){return Object(v.jsxs)("div",{className:"detail cart",children:[Object(v.jsx)("img",{src:e.images.url,alt:""}),Object(v.jsxs)("div",{className:"box-detail",children:[Object(v.jsx)("h2",{children:e.title}),Object(v.jsxs)("h3",{children:["$ ",e.price*e.quatity]}),Object(v.jsx)("p",{children:e.description}),Object(v.jsx)("p",{children:e.content}),Object(v.jsxs)("div",{className:"amount",children:[Object(v.jsx)("button",{onClick:function(){return t=e._id,c.forEach((function(e){e._id===t&&(1===e.quatity?e.quatity=1:e.quatity-=1)})),void n(Object(h.a)(c));var t},children:" - "}),Object(v.jsx)("span",{children:e.quatity}),Object(v.jsx)("button",{onClick:function(){return t=e._id,c.forEach((function(e){e._id===t&&(e.quatity+=1)})),void n(Object(h.a)(c));var t},children:" + "})]}),Object(v.jsx)("div",{className:"delete",onClick:function(){return t=e._id,void(window.confirm("Do you want to delete this product?")&&(c.forEach((function(e,r){e._id===t&&c.splice(r,1)})),n(Object(h.a)(c))));var t},children:"X"})]})]},e._id)})),Object(v.jsxs)("div",{className:"total",children:[Object(v.jsxs)("h3",{children:["Total: $ ",i]}),Object(v.jsx)(H,{})]})]})};var M=function(){return Object(v.jsx)("div",{children:"404 | Not Found"})};var V=function(){var e=Object(_.g)(),t=Object(r.useContext)(m),c=Object(j.a)(t.productsAPI.products,1)[0],n=Object(r.useState)([]),a=Object(j.a)(n,2),s=a[0],o=a[1];return Object(r.useEffect)((function(){e.id&&c.forEach((function(t){t._id===e.id&&o(t)}))}),[e,c]),console.log(s),0===s.length?null:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"detail",children:[Object(v.jsx)("img",{src:s.images.url,alt:""}),Object(v.jsxs)("div",{className:"box-detail",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("h2",{children:s.title}),Object(v.jsxs)("h6",{children:["#id: ",s.product_id]})]}),Object(v.jsxs)("span",{children:["$ ",s.price]}),Object(v.jsx)("p",{children:s.content}),Object(v.jsxs)("p",{children:["Sold: ",s.sold]}),Object(v.jsx)(i.b,{to:"/cart",className:"cart",children:"Buy Now"})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Related products"}),Object(v.jsx)("div",{className:"products",children:c.map((function(e){return e.category===s.category?Object(v.jsx)(N,{product:e},e._id):null}))})]})]})};var Y=function(){var e=Object(r.useContext)(m),t=Object(j.a)(e.categoriesAPI.categories,1)[0],c=Object(r.useState)(""),n=Object(j.a)(c,2),a=n[0],s=n[1],i=Object(j.a)(e.token,1)[0],o=Object(j.a)(e.categoriesAPI.callback,2),d=o[0],p=o[1],O=Object(r.useState)(!1),h=Object(j.a)(O,2),x=h[0],f=h[1],g=Object(r.useState)(""),y=Object(j.a)(g,2),k=y[0],w=y[1],C=function(){var e=Object(l.a)(u.a.mark((function e(t){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!x){e.next=9;break}return e.next=5,b.a.put("/api/category/".concat(k),{name:a},{headers:{Authorization:i}});case 5:c=e.sent,alert(c.data),e.next=13;break;case 9:return e.next=11,b.a.post("/api/category",{name:a},{headers:{Authorization:i}});case 11:r=e.sent,alert(r.data);case 13:f(!1),p(!d),s(""),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Testing edit",t,c),w(t),s(c),f(!0);case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.delete("/api/category/".concat(t),{headers:{Authorization:i}});case 3:c=e.sent,alert(c.data.msg),p(!d),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"categories",children:[Object(v.jsxs)("form",{onSubmit:C,children:[Object(v.jsx)("label",{htmlFor:"category",children:"Category"}),Object(v.jsx)("input",{type:"text",name:"category",value:a,required:!0,onChange:function(e){return s(e.target.value)}}),Object(v.jsx)("button",{type:"submit",children:x?"Update":"Create"})]}),Object(v.jsx)("div",{className:"col",children:t.map((function(e){return Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("p",{children:e.name}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){return _(e._id,e.name)},children:"Edit"}),Object(v.jsx)("button",{onClick:function(){return A(e._id)},children:"Delete"})]})]},e._id)}))})]})},$={product_id:"",title:"",price:0,description:"How to add tutorial videos of cool css effect",content:"Welcome to our page",category:"",_id:""};var W=function(){var e=Object(r.useContext)(m),t=Object(r.useState)($),c=Object(j.a)(t,2),n=c[0],a=c[1],s=Object(j.a)(e.categoriesAPI.categories,1)[0],i=Object(r.useState)(!1),o=Object(j.a)(i,2),d=o[0],p=o[1],h=Object(r.useState)(!1),x=Object(j.a)(h,2),f=x[0],g=x[1],y=Object(j.a)(e.userAPI.isAdmin,1)[0],k=Object(j.a)(e.token,1)[0],w=Object(_.f)(),C=Object(_.g)(),A=Object(j.a)(e.productsAPI.products,1)[0],N=Object(r.useState)(!1),S=Object(j.a)(N,2),I=S[0],E=S[1],F=Object(j.a)(e.productsAPI.callback,2),L=F[0],D=F[1];Object(r.useEffect)((function(){C.id?(E(!0),A.forEach((function(e){e._id===C.id&&(a(e),p(e.images))}))):(E(!1),a($),p(!1))}),[C.id,A]);var z=function(){var e=Object(l.a)(u.a.mark((function e(t){var c,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("You're not an admin."));case 4:if(c=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("File does not exist."));case 7:if(!(c.size>1048576)){e.next=9;break}return e.abrupt("return",alert("File too large!"));case 9:if("image/jpeg"===c.type||"image/png"===c.type){e.next=11;break}return e.abrupt("return",alert("File format is incorrect."));case 11:return(r=new FormData).append("file",c),g(!0),e.next=16,b.a.post("/api/upload",r,{headers:{"content-type":"multipart/form-data",Authorization:k}});case 16:n=e.sent,g(!1),p(n.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return",alert("You are not an admin."));case 3:return g(!0),e.next=6,b.a.post("/api/destroy",{public_id:d.public_id},{headers:{Authorization:k}});case 6:g(!1),p(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.target,c=t.name,r=t.value;a(Object(O.a)(Object(O.a)({},n),{},Object(q.a)({},c,r)))},U={display:d?"block":"none"},B=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("You're not an admin."));case 4:if(d){e.next=6;break}return e.abrupt("return",alert("No image uploaded."));case 6:if(!I){e.next=11;break}return e.next=9,b.a.put("/api/products/".concat(n._id),Object(O.a)(Object(O.a)({},n),{},{images:d}),{headers:{Authorization:k}});case 9:e.next=13;break;case 11:return e.next=13,b.a.post("/api/products",Object(O.a)(Object(O.a)({},n),{},{images:d}),{headers:{Authorization:k}});case 13:D(!L),w.push("/"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),alert(e.t0.response);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"create_product",children:[Object(v.jsxs)("div",{className:"upload",children:[Object(v.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:z}),f?Object(v.jsx)("div",{id:"file_img",children:Object(v.jsx)(P,{})}):Object(v.jsxs)("div",{id:"file_img",style:U,children:[Object(v.jsx)("img",{src:d?d.url:"",alt:""}),Object(v.jsx)("span",{onClick:R,children:"X"})]})]}),Object(v.jsxs)("form",{onSubmit:B,children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("label",{htmlFor:"product_id",children:"Product ID"}),Object(v.jsx)("input",{type:"text",name:"product_id",id:"product_id",required:!0,value:n.product_id,onChange:T,disabled:I})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("label",{htmlFor:"title",children:"Title"}),Object(v.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:n.title,onChange:T})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("label",{htmlFor:"price",children:"Price"}),Object(v.jsx)("input",{type:"number",name:"price",id:"price",required:!0,value:n.price,onChange:T})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("label",{htmlFor:"description",children:"Description"}),Object(v.jsx)("textarea",{type:"number",name:"description",id:"description",required:!0,value:n.description,rows:"5",onChange:T})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("label",{htmlFor:"content",children:"Content"}),Object(v.jsx)("textarea",{type:"text",name:"content",id:"content",required:!0,value:n.content,rows:"7",onChange:T})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("label",{htmlFor:"categories",children:"Categories:"}),Object(v.jsxs)("select",{name:"category",value:n.category,onChange:T,children:[Object(v.jsx)("option",{value:"",children:"Please select a category"}),s.map((function(e){return Object(v.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(v.jsx)("button",{type:"submit",children:I?"Update":"Create"})]})]})};var X=function(){var e=Object(r.useContext)(m),t=Object(j.a)(e.userAPI.isLogged,1)[0],c=Object(j.a)(e.userAPI.isAdmin,1)[0];return Object(v.jsxs)(_.c,{children:[Object(v.jsx)(_.a,{path:"/",exact:!0,component:E}),Object(v.jsx)(_.a,{path:"/detail/:id",exact:!0,component:V}),Object(v.jsx)(_.a,{path:"/login",exact:!0,component:t?M:F}),Object(v.jsx)(_.a,{path:"/create_product",exact:!0,component:c?W:M}),Object(v.jsx)(_.a,{path:"/edit_product/:id",exact:!0,component:c?W:M}),Object(v.jsx)(_.a,{path:"/category",exact:!0,component:c?Y:M}),Object(v.jsx)(_.a,{path:"/register",exact:!0,component:t?M:L}),Object(v.jsx)(_.a,{path:"/cart",exact:!0,component:J}),Object(v.jsx)(_.a,{path:"*",exact:!0,component:M})]})};var K=function(){return Object(v.jsx)(g,{children:Object(v.jsx)(i.a,{children:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(C,{}),Object(v.jsx)(X,{})]})})})};s.a.render(Object(v.jsx)(K,{}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.e93aee68.chunk.js.map